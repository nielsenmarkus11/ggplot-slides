---
title: "ggplot2"
author: "http://lpv-phdev01:3838/ggplot-slides"
runtime: shiny
output: 
  ioslides_presentation:
    widescreen: true
    smaller: true
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## ggplot2 Syntax

    # If you haven't already install the package.
    install.packages("ggplot2")
    
    # Load the library
    library(ggplot2)
    
    ggplot([insert data here], aes([insert variables here])) + geom_[graph type]


## Basic Example
```{r, echo=FALSE}
library(ggplot2)

new.theme <- theme_update(axis.text = element_text(size=14),axis.title=element_text(size=18))

ccdat <- read.csv("chronic-conditions.csv")
trim <- function (x) gsub("^\\s+|\\s+$", "", x)
ccdat$state <- trim(ccdat$state)
ccdat$year <- as.numeric(ccdat$year)
alldat <- ccdat[ccdat$age=="All" & ccdat$state=="National",]

fluidRow(
  column(10,
         textInput("mycode",label=NULL,
                   value="ggplot(alldat,aes(x=year,y=prevalence)) + geom_point()",width="100%"),
         tags$style(type="text/css", "#mycode { height: 36px; width: 100%; font-size: 18px; display: block;}")
  ),
  column(2,
         actionButton("submit","Submit"),
         tags$style(type="text/css", "#submit { height: 36px; width: 100%; font-size: 18px; display: block;}")
  )
)
renderPlot({
  input$submit
  eval(parse(text=isolate(input$mycode)))
},height=450)
```

## geom_line()
```{r, echo=FALSE}

ut.all <- ccdat[ccdat$state=="Utah" & ccdat$age=="All" & ccdat$chronicCondition=="Diabetes",]

fluidRow(
  column(10,
         textInput("mycode2",label=NULL,
                   value="ggplot(ut.all,aes(x=year,y=prevalence,color=gender)) + geom_line()",width="100%"),
         tags$style(type="text/css", "#mycode2 { height: 36px; width: 100%; font-size: 18px; display: block;}")
  ),
  column(2,
         actionButton("submit2","Submit"),
         tags$style(type="text/css", "#submit2 { height: 36px; width: 100%; font-size: 18px; display: block;}")
  )
)
renderPlot({
  input$submit2
  eval(parse(text=isolate(input$mycode2)))
},height=450)
```

## geom_bar()
g1 <- ggplot(ut.all,aes(x=year,y=prevalence,fill=gender))
```{r, echo=FALSE}
g1 <- ggplot(ut.all,aes(x=year,y=prevalence,fill=gender))
fluidRow(
  column(10,
         textInput("mycode3",label=NULL,
                   value="g1 + geom_bar(stat=\"identity\",position=\"dodge\")",width="100%"),
         tags$style(type="text/css", "#mycode3 { height: 36px; width: 100%; font-size: 18px; display: block;}")
  ),
  column(2,
         actionButton("submit3","Submit"),
         tags$style(type="text/css", "#submit3 { height: 36px; width: 100%; font-size: 18px; display: block;}")
  )
)
renderPlot({
  input$submit3
  eval(parse(text=isolate(input$mycode3)))
},height=450)
```


## Faceting
ggplot(alldat,aes(x=year,y=prevalence,fill=gender)) + geom_bar(stat="identity",position="dodge") + facet_wrap(~chronicCondition)

# How does Shiny-Server differentiate?

## Pros

- Runs any R code
- Flexibility in reports due to the ability to add HTML, JavaScript, CSS
- Additional interactivity through the use of [htmlwidgets](http://www.htmlwidgets.org/) and JavaScript libraries
- User doesn't need R installed on their local machine

<img src="www/smiley-face.jpg" width="200px" height="200px"></img>

## Cons

- Need R developer to create the app 
- Syntax can by difficult for current R developer to learn/use
- Apps are only as flexible as R developer defines

<img src="www/sad-face.jpg" width="200px" height="200px"></img>

## More Complex Examples
- [Soccer Field](https://byusoccerstats.shinyapps.io/byu-soccer/)
- [Regression Example](http://lpv-phdev01:3838/simp-reg/)
- [HCC Recapture Project](http://lpv-phdev01:3838/hcc-imp/)
- These slides! [(Code)](https://git.co.ihc.com/users/mniels17/repos/shiny-slides/browse)

# Questions?